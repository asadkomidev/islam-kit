# Qibla Direction

Calculate the direction to the Kaaba from any location on Earth.

## Features

- **Accurate Calculation**: Uses the great-circle bearing formula
- **Distance Calculation**: Get distance to Kaaba in kilometers
- **Compass Points**: 16-point compass direction (N, NNE, NE, etc.)
- **Zero Dependencies**: Pure TypeScript implementation
- **Tiny Bundle**: ~1KB gzipped

## Installation

```bash
npm install @islam-kit/qibla
```

## Quick Example

```typescript
import { calculateQibla } from '@islam-kit/qibla';

// New York City
const qibla = calculateQibla({
  latitude: 40.7128,
  longitude: -74.006,
});

console.log(qibla.direction); // 58.48 (degrees from True North)
console.log(qibla.distance);  // 10306.32 (kilometers)
console.log(qibla.compass);   // "ENE" (East-Northeast)
```

## Understanding the Direction

The Qibla direction is given in degrees from True North, measured clockwise:

- **0°/360°**: North
- **90°**: East
- **180°**: South
- **270°**: West

### Example Directions

| Location | Direction | Compass |
|----------|-----------|---------|
| New York, USA | ~58° | ENE |
| London, UK | ~119° | ESE |
| Tokyo, Japan | ~293° | WNW |
| Sydney, Australia | ~278° | W |
| Cairo, Egypt | ~136° | SE |

## Individual Functions

You can also use individual functions:

```typescript
import {
  getQiblaDirection,
  getDistanceToKaaba,
  getQiblaCompass,
} from '@islam-kit/qibla';

const coords = { latitude: 40.7128, longitude: -74.006 };

// Just the direction
const direction = getQiblaDirection(coords);
console.log(direction); // 58.48

// Just the distance
const distance = getDistanceToKaaba(coords);
console.log(distance); // 10306.32

// Just the compass point
const compass = getQiblaCompass(coords);
console.log(compass); // "ENE"
```

## React Example

```tsx
import { useState, useEffect } from 'react';
import { calculateQibla } from '@islam-kit/qibla';

function QiblaCompass({ latitude, longitude }) {
  const [qibla, setQibla] = useState(null);

  useEffect(() => {
    const result = calculateQibla({ latitude, longitude });
    setQibla(result);
  }, [latitude, longitude]);

  if (!qibla) return null;

  return (
    <div>
      <p>Direction: {qibla.direction.toFixed(1)}°</p>
      <p>Compass: {qibla.compass}</p>
      <p>Distance: {qibla.distance.toFixed(0)} km</p>
      <div
        style={{
          transform: `rotate(${qibla.direction}deg)`,
          width: 50,
          height: 50,
        }}
      >
        ↑
      </div>
    </div>
  );
}
```

## With Device Compass

Combine with device compass heading to point to the Qibla:

```typescript
import { getQiblaDirection } from '@islam-kit/qibla';

function getQiblaFromDeviceHeading(
  coordinates: { latitude: number; longitude: number },
  deviceHeading: number // From device compass/magnetometer
): number {
  const qiblaDirection = getQiblaDirection(coordinates);

  // Calculate relative direction from device heading
  let relativeDirection = qiblaDirection - deviceHeading;

  // Normalize to 0-360
  if (relativeDirection < 0) {
    relativeDirection += 360;
  }

  return relativeDirection;
}
```

## Kaaba Coordinates

The package uses the official Kaaba coordinates:

```typescript
import { KAABA_COORDINATES } from '@islam-kit/qibla';

console.log(KAABA_COORDINATES);
// { latitude: 21.4225, longitude: 39.8262 }
```

## Next Steps

- [API Reference](/qibla/api) - Full API documentation
