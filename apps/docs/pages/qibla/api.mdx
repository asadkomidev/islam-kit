# API Reference

## Functions

### calculateQibla

Calculate full Qibla information including direction, distance, and compass point.

```typescript
function calculateQibla(coordinates: Coordinates): QiblaResult;
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `coordinates` | `Coordinates` | Location to calculate from |

**Returns:** `QiblaResult`

```typescript
interface QiblaResult {
  direction: number;    // Degrees from True North (0-360)
  distance: number;     // Distance to Kaaba in kilometers
  compass: CompassPoint; // 16-point compass direction
}
```

**Example:**

```typescript
import { calculateQibla } from '@islam-kit/qibla';

const result = calculateQibla({
  latitude: 40.7128,
  longitude: -74.006,
});

console.log(result.direction); // 58.48
console.log(result.distance);  // 10306.32
console.log(result.compass);   // "ENE"
```

---

### getQiblaDirection

Get only the Qibla direction in degrees.

```typescript
function getQiblaDirection(coordinates: Coordinates): number;
```

**Returns:** Direction in degrees from True North (0-360)

**Example:**

```typescript
import { getQiblaDirection } from '@islam-kit/qibla';

const direction = getQiblaDirection({
  latitude: 51.5074,
  longitude: -0.1278,
});

console.log(direction); // 118.99
```

---

### getDistanceToKaaba

Get the distance from a location to the Kaaba in kilometers.

```typescript
function getDistanceToKaaba(coordinates: Coordinates): number;
```

**Returns:** Distance in kilometers

**Example:**

```typescript
import { getDistanceToKaaba } from '@islam-kit/qibla';

const distance = getDistanceToKaaba({
  latitude: 35.6762,
  longitude: 139.6503,
});

console.log(distance); // 9471.86
```

---

### getQiblaCompass

Get the compass point direction to the Qibla.

```typescript
function getQiblaCompass(coordinates: Coordinates): CompassPoint;
```

**Returns:** 16-point compass direction

**Example:**

```typescript
import { getQiblaCompass } from '@islam-kit/qibla';

const compass = getQiblaCompass({
  latitude: -33.8688,
  longitude: 151.2093,
});

console.log(compass); // "W"
```

---

## Types

### Coordinates

```typescript
interface Coordinates {
  latitude: number;  // -90 to 90
  longitude: number; // -180 to 180
}
```

### QiblaResult

```typescript
interface QiblaResult {
  /** Direction in degrees from True North (0-360) */
  direction: number;

  /** Distance to Kaaba in kilometers */
  distance: number;

  /** 16-point compass direction */
  compass: CompassPoint;
}
```

### CompassPoint

```typescript
type CompassPoint =
  | 'N' | 'NNE' | 'NE' | 'ENE'
  | 'E' | 'ESE' | 'SE' | 'SSE'
  | 'S' | 'SSW' | 'SW' | 'WSW'
  | 'W' | 'WNW' | 'NW' | 'NNW';
```

---

## Constants

### KAABA_COORDINATES

The coordinates of the Kaaba in Mecca, Saudi Arabia.

```typescript
const KAABA_COORDINATES: Readonly<Coordinates> = {
  latitude: 21.4225,
  longitude: 39.8262,
};
```

### EARTH_RADIUS_KM

Earth's mean radius in kilometers (WGS84 spherical approximation).

```typescript
const EARTH_RADIUS_KM = 6371.0088;
```

---

## Algorithm

The Qibla direction is calculated using the **forward azimuth** formula for great-circle navigation:

```
θ = atan2(
  sin(Δλ) × cos(φ2),
  cos(φ1) × sin(φ2) − sin(φ1) × cos(φ2) × cos(Δλ)
)
```

Where:
- `φ1` = latitude of current location
- `φ2` = latitude of Kaaba
- `Δλ` = difference in longitude

The distance is calculated using the **Haversine formula**:

```
a = sin²(Δφ/2) + cos(φ1) × cos(φ2) × sin²(Δλ/2)
c = 2 × atan2(√a, √(1−a))
d = R × c
```

Where `R` is Earth's radius.
