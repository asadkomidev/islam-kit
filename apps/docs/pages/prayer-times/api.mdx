# API Reference

## Functional API

### getPrayerTimes

Calculate prayer times for a specific date and location.

```typescript
function getPrayerTimes(
  date: Date,
  options: PrayerTimesOptions
): PrayerTimes;
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `date` | `Date` | The date to calculate times for |
| `options` | `PrayerTimesOptions` | Configuration options |

**Options:**

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `latitude` | `number` | required | Latitude of location (-90 to 90) |
| `longitude` | `number` | required | Longitude of location (-180 to 180) |
| `method` | `CalculationMethodId` | `'MWL'` | Calculation method |
| `asrMethod` | `'STANDARD' \| 'HANAFI'` | `'STANDARD'` | Asr calculation method |
| `adjustments` | `PrayerAdjustments` | `{}` | Manual adjustments in minutes |
| `highLatitudeMethod` | `HighLatitudeMethod` | `'ANGLE_BASED'` | High latitude adjustment |

**Returns:** `PrayerTimes`

```typescript
interface PrayerTimes {
  fajr: Date;
  sunrise: Date;
  dhuhr: Date;
  asr: Date;
  maghrib: Date;
  isha: Date;
}
```

**Example:**

```typescript
import { getPrayerTimes } from '@islam-kit/prayer-times';

const times = getPrayerTimes(new Date(), {
  latitude: 40.7128,
  longitude: -74.006,
  method: 'ISNA',
});
```

---

### getNextPrayer

Get the next upcoming prayer from a set of prayer times.

```typescript
function getNextPrayer(
  times: PrayerTimes,
  now?: Date
): { name: PrayerName; time: Date };
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `times` | `PrayerTimes` | Prayer times object |
| `now` | `Date` | Current time (defaults to `new Date()`) |

**Example:**

```typescript
import { getPrayerTimes, getNextPrayer } from '@islam-kit/prayer-times';

const times = getPrayerTimes(new Date(), { latitude: 40.7, longitude: -74 });
const next = getNextPrayer(times);

console.log(next.name); // 'dhuhr'
console.log(next.time); // Date object
```

---

### formatPrayerTimes

Format prayer times for display.

```typescript
function formatPrayerTimes(
  times: PrayerTimes,
  options?: FormatOptions
): FormattedPrayerTimes;
```

**Options:**

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `format` | `'12h' \| '24h'` | `'12h'` | Time format |
| `locale` | `string` | `'en-US'` | Locale for formatting |

**Example:**

```typescript
import { getPrayerTimes, formatPrayerTimes } from '@islam-kit/prayer-times';

const times = getPrayerTimes(new Date(), { latitude: 40.7, longitude: -74 });
const formatted = formatPrayerTimes(times, { format: '12h' });

console.log(formatted.fajr); // '5:23 AM'
```

---

## Class API

### PrayerTimesCalculator

A class for calculating prayer times with stateful configuration.

```typescript
class PrayerTimesCalculator {
  constructor(
    coordinates: Coordinates,
    options?: CalculatorOptions
  );

  getTimes(date: Date): PrayerTimes;
  getTimesForRange(startDate: Date, endDate: Date): PrayerTimes[];
  getNextPrayer(times: PrayerTimes, now?: Date): { name: PrayerName; time: Date };
  getCurrentPrayer(times: PrayerTimes, now?: Date): { name: PrayerName; time: Date };
  setMethod(method: CalculationMethodId): void;
  setAsrMethod(method: AsrMethod): void;
}
```

**Example:**

```typescript
import { PrayerTimesCalculator } from '@islam-kit/prayer-times';

const calculator = new PrayerTimesCalculator(
  { latitude: 40.7128, longitude: -74.006 },
  { method: 'ISNA' }
);

// Get times for today
const today = calculator.getTimes(new Date());

// Get times for a week
const startDate = new Date();
const endDate = new Date(Date.now() + 7 * 86400000);
const weekTimes = calculator.getTimesForRange(startDate, endDate);

// Change settings
calculator.setMethod('MWL');
calculator.setAsrMethod('HANAFI');
```

---

## Types

### PrayerName

```typescript
type PrayerName = 'fajr' | 'sunrise' | 'dhuhr' | 'asr' | 'maghrib' | 'isha';
```

### CalculationMethodId

```typescript
type CalculationMethodId =
  | 'MWL'
  | 'ISNA'
  | 'EGYPT'
  | 'MAKKAH'
  | 'KARACHI'
  | 'TEHRAN'
  | 'JAFARI'
  | 'GULF'
  | 'KUWAIT'
  | 'QATAR'
  | 'SINGAPORE'
  | 'TURKEY'
  | 'DUBAI'
  | 'MOONSIGHTING';
```

### Coordinates

```typescript
interface Coordinates {
  latitude: number;  // -90 to 90
  longitude: number; // -180 to 180
}
```

### PrayerAdjustments

```typescript
interface PrayerAdjustments {
  fajr?: number;
  sunrise?: number;
  dhuhr?: number;
  asr?: number;
  maghrib?: number;
  isha?: number;
}
```

---

## Constants

### CALCULATION_METHODS

Object containing all calculation method configurations:

```typescript
import { CALCULATION_METHODS } from '@islam-kit/prayer-times';

const isna = CALCULATION_METHODS.ISNA;
console.log(isna.name);   // "Islamic Society of North America"
console.log(isna.params); // { fajr: 15, isha: 15 }
```
